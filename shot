#!/bin/sh
# Make screenshot.

# choose area
case $(echo '1. Whole screen
2. Select area' | dmenu -p 'Screenshot:' -l 2) in
	1*)
		screenshotcmd() {
			maim
		} ;;
	2*)
		screenshotcmd() {
			# make sure touchpad is enabled
			case $(tp state) in
				off)
					tp toggle
					maim -s
					tp toggle ;;
				*) maim -s ;;
			esac
		} ;;
	*) exit 1 ;;
esac

# choose what to do with a screenshot
case $(echo '1. Clipboad
2. File
3. Open' | dmenu -p 'Save to:' -l 3) in
	1*)
		savecmd() {
			xclip -i -select clipboad -t image/png
		} ;;
	2*)
		savecmd() {
			cat >"$HOME/pic/screen/$(date +'%d-%m-%y_%H:%M:%S').png"
		} ;;
	3*)
		savecmd() {
			feh -
		} ;;
	*) exit 1 ;;
esac

# screenshot
screenshotcmd | savecmd
